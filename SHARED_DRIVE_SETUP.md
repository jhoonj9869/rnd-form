# 공유드라이브 설정 가이드

RND Form 앱을 팀 협업용으로 사용하기 위한 공유드라이브 설정 방법입니다.

## 🎯 설정 방법 (3가지 옵션)

### Option 1: 키워드 자동 인식 (권장)
Google Drive 웹에서 공유드라이브 이름에 다음 키워드 중 하나를 포함:
- `RND`
- `Form`
- `양식`

**예시**: "RND Form 관리", "양식 저장소", "Company Forms" 등

### Option 2: 환경변수 직접 설정
`.env` 파일에 공유드라이브 ID를 직접 설정:

```bash
# .env 파일에 추가
SHARED_DRIVE_ID=0B1234567890abcdefghijk
```

### Option 3: 첫 번째 공유드라이브 자동 사용
공유드라이브가 1개만 있으면 자동으로 사용됩니다.

## 📋 Google Drive에서 공유드라이브 생성하기

### 1. Google Drive 웹 접속
[Google Drive](https://drive.google.com) → 좌측 메뉴 → "공유 드라이브"

### 2. 새 공유드라이브 생성
- "새로 만들기" → "공유 드라이브"
- 이름: `RND Form 관리` (또는 키워드 포함된 이름)
- 설명: `팀 문서 양식 관리용 공유드라이브`

### 3. 팀원 초대
- 공유드라이브 우클릭 → "멤버 관리"
- 팀원 이메일 추가
- 권한 설정:
  - **편집자**: 문서 작성/수정 가능
  - **콘텐츠 관리자**: 파일 관리 가능
  - **관리자**: 멤버 관리 가능

## 🔍 공유드라이브 ID 확인 방법

### 방법 1: URL에서 추출
1. Google Drive 웹에서 공유드라이브 클릭
2. URL 확인: `https://drive.google.com/drive/folders/[여기가_드라이브_ID]`

### 방법 2: 앱 로그에서 확인
앱 실행 시 콘솔에 다음과 같이 출력됩니다:
```
📋 발견된 공유드라이브 목록:
  - RND Form 관리 (0B1234567890abcdefghijk)
  - 회사 문서 (0B9876543210zyxwvutsrq)
```

## 🎉 설정 완료 확인

앱을 재시작하면 다음 메시지 중 하나가 표시됩니다:

### ✅ 성공
```
✅ 키워드 매칭 공유 드라이브 발견: RND Form 관리 (0B1234567890abcdefghijk)
```

### ⚠️ 첫 번째 드라이브 사용
```
⚠️ 키워드 매칭 없음. 첫 번째 공유드라이브 사용: 회사 문서 (0B9876543210zyxwvutsrq)
💡 팁: 공유드라이브 이름에 "RND", "Form", "양식" 중 하나를 포함하면 자동 선택됩니다.
```

### ❌ 공유드라이브 없음
```
❌ 공유 드라이브가 없습니다. 개인 드라이브를 사용합니다.
💡 해결방법:
  1. Google Drive 웹에서 공유드라이브 생성
  2. 또는 기존 공유드라이브에 초대 요청
  3. 또는 .env 파일에 SHARED_DRIVE_ID=드라이브ID 설정
```

## 🚀 협업 활용 방법

### 팀 워크플로우
1. **팀원 A**: 지출결의서 작성 → 공유드라이브 저장
2. **팀원 B**: 앱에서 새로고침 → A의 문서 목록에 표시
3. **팀원 C**: 문서 열기 → 읽기 전용으로 확인
4. **관리자**: 승인 후 상태 변경 → 모든 팀원이 동기화된 상태 확인

### 권한별 기능
- **읽기**: 문서 목록 조회, 문서 내용 확인
- **편집**: + 문서 작성, 수정, 저장
- **관리**: + 문서 삭제, 팀원 권한 관리

## 🔧 문제 해결

### 권한 오류 발생 시
```bash
# 개발자 도구 → 콘솔에서 확인
❌ 공유 드라이브 검색 오류: Insufficient Permission
💡 권한 오류가 발생했지만 OAuth2 스코프는 올바르게 설정되었습니다.
```

**해결방법**:
1. 공유드라이브 관리자에게 초대 요청
2. 또는 개인드라이브로 계속 사용 (개인 문서만 관리)

### 토큰 재인증 필요 시
앱에서 "Google 로그인" 다시 실행하여 새로운 권한으로 토큰 갱신

---

## 📞 지원

문제 발생 시 앱 개발자에게 다음 정보와 함께 문의:
- 앱 실행 시 콘솔 출력 전체
- 사용 중인 Google 계정 도메인 (개인/기업)
- 공유드라이브 설정 상태